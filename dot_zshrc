# - 1. Fast shell startup
# Enable zsh's instant prompt early
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

[[ -f ~/.env_secrets ]] && source ~/.env_secrets

# - 2. znap
# Install znap if not already installed
if [[ ! -f ~/repos/znap/znap.zsh ]]; then
  mkdir -p ~/repos/znap && git clone --depth 1 https://github.com/marlonrichert/zsh-snap.git ~/repos/znap
fi
source ~/repos/znap/znap.zsh

# - 3. Theme
# Load Powerlevel10k prompt via znap
export ZDATADIR=~/repos
znap prompt romkatv/powerlevel10k

# - 4. Plugins --
znap source zsh-users/zsh-autosuggestions
znap source zdharma-continuum/fast-syntax-highlighting
znap source zsh-users/zsh-completions

# - 5. P10k Config
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
typeset -g POWERLEVEL9K_INSTANT_PROMPT=off

# â”€ 6. Completion Settings
autoload -Uz compinit && compinit

# - 7. Basic Options for Usability
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000
setopt appendhistory

setopt autocd             # cd by just typing the dir name
setopt histignoredups     # ignore duplicate history entries
setopt sharehistory       # share history across all sessions
# setopt correct            # command spelling correction

# - 8. Aliases
alias waybar-reload='pkill waybar & hyprctl dispatch exec waybar'
alias btui='bluetui'
alias nv='prime-run'
alias cd='z'
alias ff='fastfetch'
alias ca='chezmoi add --recursive --exact $(pwd)'

# Created by `pipx` on 2025-09-02 01:12:46
unset NPM_CONFIG_PREFIX
export PATH="$HOME/.npm-global/bin:$PATH:/home/adetola/.local/bin"
export BROWSER="/usr/bin/zen-browser"

# bun completions
[ -s "/home/adetola/.bun/_bun" ] && source "/home/adetola/.bun/_bun"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH="$BUN_INSTALL/bin:$PATH"

eval "$(zoxide init zsh)"
eval "$(fnm env --use-on-cd)"
